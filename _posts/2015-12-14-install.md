---
layout: post
title: Installation
comments: true
---

This post will discuss the installation steps you need to go through to set this blog up.

### Prerequisites

In order for this blog to be hosted on <Github.com> you will need to create a
repository that is named `username.github.io`. Github will then expect either a
jekyll repository (like this one) or a bunch of static html files on the
*master* branch. We will work with the latter.

This repository consists of 2 branches, namely `master` and `jekyll`. The latter
is the branch that holds the actual jekyll project. Because we use some plugins
that are not allowed on github we will have to build locally. The `master`
branch only contains static HTML files.

So proceed by creating the repository in your own github account. I will assume
that your username is `username` and the title of the github repository is thus
`username.github.io`. You can then proceed executing following commands:

- `git clone git@github.com:cdetroye/cdetroye.github.io.git`
- `mv cdetroye.github.io username.github.io`
- `cd username.github.io`
- `git remote set-url origin git@github.com/username/username.github.io.git`
- `git push remote --all`

At this point you will have an exact copy of this repository on your own
github. Recall that I said that GitHub expects you to have only static files on
the master branch because we use "exotic" plugins. This means that we have to
somehow get the output from `jekyll build` (which is located in `_site`) to the
master branch. To make this process easy I have provided a `pre-commit` hook
file located in `bin/update-script`. So in order to make the process painless
you will have to create a symlink to that script file. To do so, execute:

`ln -s bin/update-site .git/hooks/pre-commit`

This will execute the following code each time before you commit:

~~~ bash
#!/bin/bash
set -e

# Build the jekyll site
jekyll build

# Make a copy of the master branch
git clone -b master . .temp/
cd .temp/

# Copy the files
/bin/cp -rf ../_site/* .

# Commit
git add -A :/
git commit -m "Content update"
git push origin master

# Remove temp stuff
cd ..
rm -Rf .temp/
~~~

Disregard this script. It just makes sure that your html files are in the
top-level of your master branch. This means that *you can only make changes to
the `jekyll` branch and should not touch the `master` branch*.
